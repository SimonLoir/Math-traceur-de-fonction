<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>SMath</title>
    <script src="extjs.js"></script>
</head>

<body>
    <div class="centred-content">
        <img src="logo.svg" alt="">
        <h1>Bienvenue sur SMath</h1>
        <p>SMath est une suite logicielle en ligne basée sur le monde des mathématiques.</p>
        <span id="download"></span><br />
        <a href="math-bot.html"><button>SMath bot (alpha)</button></a>
        <a href="graph.html"><button>SMath (alpha)</button></a>
        <a href="stats/index.html"><button>SMath Stats(alpha)</button></a>
        <a href="series/index.html"><button>SMath Series(alpha)</button></a>
        <br /><br /> &copy; Copyright 2017 Simon Loir
        <script>
            setTimeout(function () {
                document.querySelector('.centred-content').classList.add('new-coords');
            }, 200);

            var list = document.getElementsByTagName('a');

            for (var i = 0; i < list.length; i++) {
                var a = list[i];
                a.onclick = function () {
                    document.querySelector('.centred-content').classList.remove('new-coords');
                    var e = this;
                    setTimeout(function () {
                        window.location.href = e.href;
                    }, 400);
                    return false;
                }
            }

            if (typeof process === 'object' && process + '' === '[object process]') {
                var fs = require("fs");
                var version = fs.readFileSync(__dirname + "/version.html", "utf-8");

                AR.GET("https://simonloir.be/math/version.html", function (data) {
                    if(data != version){

                        $('#download').html('<b style="color:crimson;">Une nouvelle version de smath est disponible sur simonloir.be/smath</b>');
                        if(data == "endofsupport"){
                            $('#download').html('<b style="color:crimson;">Le projet SMath est désormais abandonné. Vous possèdez la dernière version de SMath. Il n\'y aura plus de mise à jour sauf en cas de reprise du projet. </b>');   
                        }
                    }else{
                        $('#download').html('SMath est à jour ! version ' + version);
                    }
                });
            } else {
                //SMath is used by a web client
            }
        </script>
    </div>

    <style>
        body {
            background: rgba(240, 240, 240, 0.85);
            color: rgba(0, 0, 0, 0.75);
            text-align: center;
            padding: 25px;
            font-family: sans-serif;
        }

        .centred-content {
            opacity: 0;
            position: fixed;
            transition: 0.85s;
            top: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
        }

        .new-coords {
            opacity: 1;
            top: 50%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
        }

        img {
            width: 300px;
        }

        button {
            position: relative;
            background: white;
            border: none;
            min-width: 40%;
            text-align: center;
            padding: 8px;
            margin: 15px;
            border-radius: 4px;
            box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.15);
            cursor: pointer;
        }

        @media (max-width:500px) {
            img {
                width: 50%;
            }
            h1 {
                font-size: 20px;
            }
            .centred-content {
                width: calc(100% - 25px);
            }

            button {
                margin: 8px;
                min-width: 45%;
            }
        }

        @media (max-width:350px) {

            button {
                margin: 8px;
                width: 100%;
                width: calc(100% - 8px);
            }
        }
    </style>
</body>

</html>